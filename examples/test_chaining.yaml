name: "Test Chaining Runtimes"
start_task: "set_variable_task"

variables:
  message: "Hello from memory"

tasks:
  set_variable_task:
    task_id: "set_variable_task"
    operator_type: "task"
    runtime: "python"
    function: "tools.memory.set"
    args:
      - "greeting"
      - "{{ variables.message }}"
    dependencies: []
    result_key: "set_var_result"

  docker_echo:
    task_id: "docker_echo"
    operator_type: "task"
    runtime: "docker"
    image: "alpine:latest"
    command:
      - "echo"
      - "{{ memory.greeting }}"
    dependencies:
      - "set_variable_task"
    result_key: "docker_echo_output"

  python_increment:
    task_id: "python_increment"
    operator_type: "task"
    runtime: "python"
    function: "tools.memory.increment"
    args:
      - "counter"
    dependencies:
      - "docker_echo"
    result_key: "increment_result"