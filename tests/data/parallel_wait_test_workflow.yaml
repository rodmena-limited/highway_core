description: ''
name: tier_2_parallel_wait_test
start_task: log_start
tasks:
  fetch_todo_1:
    args:
    - '{{variables.base_api_url}}/todos/1'
    dependencies:
    - run_parallel_fetches
    function: tools.fetch.get
    kwargs: {}
    metadata: {}
    operator_type: task
    result_key: todo_1
    task_id: fetch_todo_1
  fetch_todo_2:
    args:
    - '{{variables.base_api_url}}/todos/2'
    dependencies:
    - run_parallel_fetches
    function: tools.fetch.get
    kwargs: {}
    metadata: {}
    operator_type: task
    result_key: todo_2
    task_id: fetch_todo_2
  log_end:
    args:
    - Tier 2 Test Finished.
    dependencies:
    - log_parallel_complete
    function: tools.log.info
    kwargs: {}
    metadata: {}
    operator_type: task
    task_id: log_end
  log_parallel_complete:
    args:
    - 'All parallel branches complete. Fetched todo 1: {{results.todo_1.data.id}}'
    dependencies:
    - fetch_todo_1
    - log_todo_2
    - short_wait
    function: tools.log.info
    kwargs: {}
    metadata: {}
    operator_type: task
    task_id: log_parallel_complete
  log_start:
    args:
    - Starting Tier 2 Test...
    dependencies: []
    function: tools.log.info
    kwargs: {}
    metadata: {}
    operator_type: task
    task_id: log_start
  log_todo_2:
    args:
    - 'Todo 2 Title: {{results.todo_2.data.title}}'
    dependencies:
    - fetch_todo_2
    - run_parallel_fetches
    function: tools.log.info
    kwargs: {}
    metadata: {}
    operator_type: task
    task_id: log_todo_2
  run_parallel_fetches:
    branches:
      branch_1:
      - fetch_todo_1
      branch_2:
      - fetch_todo_2
      - log_todo_2
      branch_3:
      - short_wait
    dependencies:
    - log_start
    metadata: {}
    operator_type: parallel
    task_id: run_parallel_fetches
  short_wait:
    dependencies:
    - run_parallel_fetches
    metadata: {}
    operator_type: wait
    task_id: short_wait
    wait_for: PT1S
variables:
  base_api_url: https://jsonplaceholder.typicode.com
version: 1.0.0

