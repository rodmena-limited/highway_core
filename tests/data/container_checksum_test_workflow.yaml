description: ''
name: Tricky Checksum Validator
start_task: set_multiplier
tasks:
  aggregate_alpha:
    args:
    - python3
    - -c
    - print(int(float('{{ results.alpha_p1 }}'.strip())) + int(float('{{ results.alpha_p2
      }}'.strip())))
    dependencies:
    - calc_alpha_part1
    - calc_alpha_part2
    function: tools.command.run
    kwargs: {}
    metadata: {}
    operator_type: task
    result_key: alpha_final
    task_id: aggregate_alpha
  aggregate_beta:
    args:
    - python3
    - -c
    - print(int(float('{{ results.beta_p1 }}'.strip())) + 1)
    dependencies:
    - calc_beta_part1
    function: tools.command.run
    kwargs: {}
    metadata: {}
    operator_type: task
    result_key: beta_final
    task_id: aggregate_beta
  calc_alpha_part1:
    args:
    - docker
    - run
    - --rm
    - alpine:latest
    - /bin/sh
    - -c
    - echo $(({{ variables.base }} * 2))
    dependencies:
    - set_multiplier
    function: tools.command.run
    kwargs: {}
    metadata: {}
    operator_type: task
    result_key: alpha_p1
    task_id: calc_alpha_part1
  calc_alpha_part2:
    args:
    - docker
    - run
    - --rm
    - busybox:latest
    - /bin/sh
    - -c
    - echo $(({{ memory.multiplier }} * 3))
    dependencies:
    - set_multiplier
    function: tools.command.run
    kwargs: {}
    metadata: {}
    operator_type: task
    result_key: alpha_p2
    task_id: calc_alpha_part2
  calc_beta_part1:
    args:
    - docker
    - run
    - --rm
    - alpine:latest
    - /bin/sh
    - -c
    - echo $(({{ variables.base }} / 4))
    dependencies:
    - set_multiplier
    function: tools.command.run
    kwargs: {}
    metadata: {}
    operator_type: task
    result_key: beta_p1
    task_id: calc_beta_part1
  final_calculation:
    args:
    - python3
    - -c
    - print(int(float('{{ results.alpha_final }}'.strip())) * int(float('{{ results.beta_final
      }}'.strip())))
    dependencies:
    - aggregate_alpha
    - aggregate_beta
    function: tools.command.run
    kwargs: {}
    metadata: {}
    operator_type: task
    result_key: the_final_number
    task_id: final_calculation
  set_multiplier:
    args:
    - multiplier
    - 7
    dependencies: []
    function: tools.memory.set
    kwargs: {}
    metadata: {}
    operator_type: task
    result_key: set_ok
    task_id: set_multiplier
variables:
  base: 100
version: 1.0.0

